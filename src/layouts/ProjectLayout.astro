---
import BaseLayout from '@layouts/BaseLayout.astro';
import { Img } from 'astro-imagetools/components';
import { machineDate, readableDate } from '@scripts/dates';

const { content } = Astro.props;
---

<BaseLayout 
	title={content.title}
	description={content.description}
	type="article" section="Project"
	datePublished={machineDate(content.published)}
	dateModified={content.modified ? machineDate(content.modified) : ''}
	tags={content.tags}
>
	<article>
		<header>
			<h1>
				{content.title}
			</h1>
			<p class="lede">
				<strong>Roles:</strong>&nbsp;
				{content.tags.map((tag) => <span>{tag}</span><span class="dividers">&nbsp;&middot;&nbsp;</span>)}
				<br />
				<strong>Period:</strong>&nbsp;
				{content.period.from}&ndash;{content.period.to}
			</p>
			<Img
				src={content.image.href}
				alt={content.image.alt}
				preload="avif"
				loading="eager"
				attributes={{
					img: {
						class: 'full-bleed'
					}
				}}
			/>
		</header>
		<main>
			<slot />
		</main>
		<footer>
			<small>
				<div>
					Posted on <time datetime={machineDate(content.published)}>{readableDate(content.published)}</time>
					{(content.modified) && (
						<span>
							&middot; Updated on <time datetime={machineDate(content.modified)}>{readableDate(content.modified)}</time>
						</span>
					)}
				</div>
				{(content.tags) && (
					<div class="tags">
						{content.tags.map((tag) =>
							<span>#{tag}</span>
						)}
					</div>
				)}
			</small>
		</footer>
	</article>
</BaseLayout>

<style>
	.lede {
		margin-block: 1em;
	}

	.dividers:last-of-type {
		display: none;
	}
</style>
